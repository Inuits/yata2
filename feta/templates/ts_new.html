<div class="cell">
    <h1>New timesheet</h1>
</div>
<div class="alert alert-danger" data-ng-if="errors.detail">
    <span class="glyphicon glyphicon-exclamation-sign"></span>
    {{errors.detail}}
</div>
<div class="cell panel" data-ng-repeat="message in errors.non_field_errors">
    <div class="body">
        <div class="col">
            <div class="cell color-red">
                <span class="icon icon-16 icon-warning-sign color-red float-left"></span>
                {{message}}
            </div>
        </div>
    </div>
</div>
<div class="cell panel">
    <div class="body">
        <div class="cell">
            <form class="form-horizontal">
                <div class="col">
                    <div class="col width-1of4">
                        <div class="cell">
                            <label>Month</label>
                        </div>
                    </div>
                    <div class="col width-fill">
                        <div class="cell">
                            <select data-ng-class="{'invalid': errors.month}" data-ng-model="timesheet.month">
                                <option data-ng-repeat='(i, m) in month' value="{{i}}">{{m}}</option>
                            </select>
                            <select data-ng-class="{'invalid': errors.year}" data-ng-model="timesheet.year">
                                <option data-ng-repeat="y in years" value="{{y}}">{{y}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col" ng-if="errors.month||errors.year">
                    <div class="col width-1of4"></div>
                    <div class="col width-fill">
                        <div class="cell">
                            <div class="label background-red" data-ng-repeat="message in errors.month">Month: {{message}}</div>
                            <div class="label background-red" data-ng-repeat="message in errors.year">Year: {{message}}</div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="col width-1of4">
                        <div class="cell">
                            <label class="control-label col-sm-2" for="customer">Customer</label>
                        </div>
                    </div>
                    <div class="col width-fill">
                        <div class="cell">
                            <select data-ng-model="selectedcustomer">
                                <option data-ng-repeat="c in customers|orderBy:['name','id']" value="{{c.id}}">{{c.name}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="col width-1of4">
                        <div class="cell">
                            <label class="control-label col-sm-2" for="project">Project</label>
                    </div></div>
                    <div class="col width-fill">
                        <div class="cell">
                            <select  data-ng-class="{'invalid': errors.project}" data-ng-model="timesheet.project">
                                <option data-ng-repeat="p in projects|filter:{'customer': selectedcustomer}|orderBy:['name','id']" value="{{p.id}}">{{p.name}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col" ng-if="errors.project">
                    <div class="col width-1of4"></div>
                    <div class="col width-fill">
                        <div class="cell">
                            <div class="label background-red" data-ng-repeat="message in errors.project">{{message}}</div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="col width-1of4">
                        <div class="cell">
                    <label class="control-label col-sm-2" for="company">Company</label>
                    </div></div>
                    <div class="col width-fill">
                        <div class="cell">
                            <select  data-ng-class="{'invalid': errors.company}" data-ng-model="timesheet.company">
                            <option data-ng-repeat="c in companies|orderBy:['name','id']" value="{{c.id}}">{{c.name}}</option>
                        </select>
                        </div>
                    </div>
                </div>
                <div class="col" ng-if="errors.company">
                    <div class="col width-1of4"></div>
                    <div class="col width-fill">
                        <div class="cell">
                            <div class="label background-red" data-ng-repeat="message in errors.company">{{message}}</div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-2"></div><div class="col-sm-10">
                        <input type="submit" class="btn btn-primary" data-ng-click="create()" value="Submit"/>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
