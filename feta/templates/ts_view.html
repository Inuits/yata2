<div class='cell'>
  <h1>Timesheet</h1>
</div>
<div class='cell'>
  <table class='border'>
    <tr>
      <td>Customer:</td>
      <td>
        {{timesheet.customer_name}}
      </td>
      <td>Project:</td>
      <td>
        {{timesheet.project_name}}
      </td>
    </tr>
    <tr>
      <td>Month:</td>
      <td>
        {{timesheet.month}}/{{timesheet.year}}
      </td>
      <td>User:</td>
      <td>
        {{timesheet.user_name}}
      </td>
    </tr>
  </table>
</div>
<div class='cell panel' data-ng-if='timesheet.locked'>
  <div class='header background-orange'>
    This timesheet is locked.
  </div>
</div>
<div class='cell panel' data-ng-if='!timesheet.locked'>
  <div class='header'>
    Add a task
  </div>
  <div class='body'>
    <form>
      <div class='cell'>
        <div class='col'>
          <div class='col width-1of12'>
            <div class='cell'>
              <input class='text width-10of12' data-ng-class='{"invalid":errors.day}' placeholder='Day' data-ng-model='newhour.day' />
            </div>
          </div>
          <div class='col width-6of12'>
            <div class='cell'>
              <input class='text width-11of12' data-ng-class='{"invalid":errors.task}' placeholder='Task' data-ng-model='newhour.task' />
            </div>
          </div>
          <div class='col width-1of12'>
            <div class='cell'>
              <input class='text width-10of12' data-ng-class='{"invalid":errors.hours}' placeholder='100%' data-ng-model='newhour.hours' />
            </div>
          </div>
          <div class='col width-1of12'>
            <div class='cell'>
              <input class='text width-10of12' data-ng-class='{"invalid":errors.hours150}' placeholder='150%' data-ng-model='newhour.hours150' />
            </div>
          </div>
          <div class='col width-1of12'>
            <div class='cell'>
              <input class='text width-10of12' data-ng-class='{"invalid":errors.hours200}' placeholder='200%' data-ng-model='newhour.hours200' />
            </div>
          </div>
          <div class='col width-1of12'>
            <div class='cell'>
              <input class='text width-10of12' data-ng-class='{"invalid":errors.hourstravel}' placeholder='Travel' data-ng-model='newhour.hourstravel' />
            </div>
          </div>
          <div class='col width-1of12'>
            <div class='cell'>
              <a class='button width-8of12' data-ng-click='add()'>
                Add
              </a>
            </div>
          </div>
        </div>
        <div class='col'>
          <div class='col width-11of12'>
            <div class='cell'>
              <div class='label background-red' data-ng-repeat='message in errors.non_field_errors'>
                {{message}}
              </div>
              <div class='label background-red' data-ng-repeat='message in errors.day'>
                Day: {{message}}
              </div>
              <div class='label background-red' data-ng-repeat='message in errors.task'>
                Task: {{message}}
              </div>
              <div class='label background-red' data-ng-repeat='message in errors.hours'>
                100%: {{message}}
              </div>
              <div class='label background-red' data-ng-repeat='message in errors.hours150'>
                150%: {{message}}
              </div>
              <div class='label background-red' data-ng-repeat='message in errors.hours200'>
                200%: {{message}}
              </div>
              <div class='label background-red' data-ng-repeat='message in errors.hourstravel'>
                Travel: {{message}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
<div class='cell'>
  <div class='body'>
    <table class="datasheet">
      <thead>
        <tr>
          <th>Day</th>
            <th>Message</th>
            <th>100%</th>
            <th>150%</th>
            <th>200%</th>
            <th>Travel</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr data-ng-repeat="hour in hours|orderBy:['day','id']">
          <td class="text-center ">{{hour.day}}</td>
            <td class="text-center width-fill">{{hour.task}}</td>
            <td class="text-center ">{{hour.hours}}</td>
            <td class="text-center ">{{hour.hours150}}</td>
            <td class="text-center ">{{hour.hours200}}</td>
            <td class="text-center ">{{hour.hourstravel}}</td>
            <td class="text-center ">
              <div class="btn-group">
                <a data-ng-class="{'btn': true, 'btn-default': true, 'disabled': timesheet.locked}" data-ng-click="delete()"><i class="glyphicon glyphicon-edit"></i></a>
                  <a data-ng-class="{'btn': true, 'btn-default': true, 'disabled': timesheet.locked}" data-ng-click="delete()"><i class="glyphicon glyphicon-retweet"></i></a>
                    <a data-ng-class="{'btn': true, 'btn-default': true, 'disabled': timesheet.locked}" data-ng-click="delete(hour)"><i class="glyphicon glyphicon-trash"></i></a>
                </div>
            </td>
        </tr>
        <tr>
          <td class="text-center " data-ng-bind="hours.length + ' entries'"></td>
            <td class="text-center "></td>
            <td class="text-center "></td>
            <td class="text-center "></td>
            <td class="text-center "></td>
            <td class="text-center "></td>
            <td class="text-center ">
              <a data-ng-click="lock(timesheet)" data-ng-class="{                'background-orange': timesheet.locked,                  'disabled': timesheet.locked && !$root.user.is_staff}">
                    <span data-ng-class="{'icon':true, 'icon-lock':timesheet.locked, 'icon-unlock': !timesheet.locked}"></span>
                      </a>
            </td>
        </tr>
        </tbody>
    </table>

  </div>
</div>
</div>

